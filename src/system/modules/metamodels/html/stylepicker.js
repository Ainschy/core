var Stylepicker4ward=new Class({initialize:function(a,e){this.checkboxes=a.getElements("input");var e=$(parent.document.getElementById(e));if(e==null){alert("Parent-Field not found! [E11]");return}if(e.get("tag")!="input"){e=e.getElements("input");if(e==null||e.length<1){alert("Parent-Field not found! [E12]");return}this.parentField=$(e[e.length-1])}else{this.parentField=e}a.getElements(".item").each(function(f){f.addEvent("click",this.clickItem.bindWithEvent(this,[f]))}.bind(this));var d=this.parentField.get("value").trim().split(",");for(var c=0;c<d.length;c++){for(var b=0;b<this.checkboxes.length;b++){if(d[c]==$(this.checkboxes[b]).get("value")){this.checkboxes[b].checked=true}}}},clickItem:function(f,b){if(f.target.get("tag")=="img"&&f.target.get("rel").length>0){this.showImage(f,f.target);return}var c=b.getElement("input");if(f==null||f.target.get("tag")!="input"){c.checked=!c.checked}var d=c.get("value");var a=this.parentField.get("value").trim().split(",");if(c.checked){if(!a.contains(d)){a.push(d)}}else{a.erase(d)}this.parentField.set("value",a.join(","))},showImage:function(c,b){var a=new Asset.image(b.get("rel"),{onLoad:function(){var d={x:a.get("width"),y:a.get("height")};a.setStyles({height:0,width:0,position:"absolute",left:b.getPosition().x+"px",top:b.getPosition().y+"px"});a.set("morph",{duration:400,transition:"quint:in:out"});a.addEvent("click",function(){a.set("morph",{onComplete:function(){a.destroy()}}).morph({height:0,width:0})});a.inject(document.body);a.morph({height:d.y,width:d.x})}})}});